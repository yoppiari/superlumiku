# ============================================================================
# SUPERLUMIKU ENVIRONMENT VARIABLES
# ============================================================================
# Complete configuration reference for all environment variables.
# All variables are validated at application startup using Zod.
#
# Variable Status:
# - [REQUIRED]           Must be set in all environments
# - [REQUIRED-PROD]      Must be set in production, optional in dev/test
# - [OPTIONAL]           Has sensible defaults, can be overridden
# - [FEATURE]            Only needed when specific features are enabled
#
# See docs/ENVIRONMENT_VARIABLES.md for detailed documentation.
# ============================================================================

# ============================================================================
# NODE ENVIRONMENT
# ============================================================================

# [OPTIONAL] Node environment mode
# Valid values: "development", "production", "test"
# Default: "development"
NODE_ENV=development

# [OPTIONAL] Server port number
# Valid range: 1-65535
# Default: 3000
PORT=3000

# ============================================================================
# DATABASE
# ============================================================================

# [REQUIRED] Database connection string
# For PostgreSQL: postgresql://user:password@host:port/database
# For SQLite (dev): file:./backend/prisma/dev.db
# Examples:
#   - PostgreSQL: postgresql://lumiku:password@localhost:5432/lumiku
#   - SQLite: file:./prisma/dev.db
DATABASE_URL="file:./backend/prisma/dev.db"

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================

# [REQUIRED] Secret key for JWT token signing
# SECURITY REQUIREMENTS:
#   - Minimum 32 characters (enforced)
#   - High entropy (random, not dictionary words)
#   - Different for each environment
#   - NEVER commit to version control
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-in-production-min-32-chars"

# [OPTIONAL] JWT token expiration time
# Format: <number><unit> where unit is: s (seconds), m (minutes), h (hours), d (days)
# Examples: "24h", "7d", "30d"
# Default: "7d"
JWT_EXPIRES_IN="7d"

# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================

# [REQUIRED-PROD] Allowed CORS origin for frontend
# Must be a valid URL
# Production: Must be your production frontend URL (HTTPS)
# Development: http://localhost:5173
# Examples:
#   - Production: https://app.superlumiku.com
#   - Development: http://localhost:5173
CORS_ORIGIN="http://localhost:5173"

# ============================================================================
# REDIS (Optional - Required in Production)
# ============================================================================

# [REQUIRED-PROD] Redis host for rate limiting and caching
# Required in production for distributed rate limiting
# Development: Can run without Redis (in-memory fallback)
# Examples:
#   - Local: localhost
#   - Remote: redis.example.com
#   - Docker: redis
# REDIS_HOST=localhost

# [OPTIONAL] Redis port number
# Default: 6379
# REDIS_PORT=6379

# [OPTIONAL] Redis password for authentication
# Leave empty for no password (development)
# Required for production deployments
# REDIS_PASSWORD=your-redis-password

# ============================================================================
# FILE STORAGE
# ============================================================================

# [OPTIONAL] Directory path for file uploads
# Relative or absolute path
# Default: "./uploads"
UPLOAD_PATH="./uploads"

# [OPTIONAL] Directory path for generated outputs
# Relative or absolute path
# Default: "./outputs"
OUTPUT_PATH="./outputs"

# [OPTIONAL] Maximum file upload size in bytes
# Default: 524288000 (500MB)
# Examples:
#   - 10MB: 10485760
#   - 100MB: 104857600
#   - 500MB: 524288000
#   - 1GB: 1073741824
MAX_FILE_SIZE=524288000

# ============================================================================
# PAYMENT GATEWAY (DUITKU)
# ============================================================================

# [REQUIRED] Duitku merchant identification code
# Obtain from Duitku dashboard
DUITKU_MERCHANT_CODE="your-merchant-code"

# [REQUIRED] Duitku API key for authentication
# Minimum 10 characters
# Obtain from Duitku dashboard
DUITKU_API_KEY="your-api-key"

# [REQUIRED] Callback URL for Duitku payment notifications
# Must be a valid URL accessible from the internet
# Production: Must use HTTPS
# Development: Can use HTTP with ngrok/localhost
# Format: https://your-domain.com/api/payments/callback
DUITKU_CALLBACK_URL="http://localhost:3000/api/payments/callback"

# [REQUIRED] Return URL after payment completion
# Must be a valid URL
# Production: Must use HTTPS
# User is redirected here after payment
# Format: https://your-domain.com/payments/status
DUITKU_RETURN_URL="http://localhost:5173/payments/status"

# [OPTIONAL] Duitku API base URL
# Default: "https://passport.duitku.com"
# Usually not needed unless using custom Duitku endpoint
DUITKU_BASE_URL="https://passport.duitku.com"

# [OPTIONAL] Duitku environment mode
# Valid values: "sandbox", "production"
# Default: "sandbox"
# Use "sandbox" for testing, "production" for live payments
DUITKU_ENV="sandbox"

# [OPTIONAL] Enable IP whitelist for payment callbacks
# SECURITY: Protects against forged payment callbacks
# WARNING: NEVER set to false in production!
# Default: true
PAYMENT_IP_WHITELIST_ENABLED="true"

# ============================================================================
# RATE LIMITING
# ============================================================================

# [OPTIONAL] Enable rate limiting globally
# Default: true
# Set to "false" to disable (not recommended in production)
RATE_LIMIT_ENABLED="true"

# Login Rate Limits (IP-based)
# [OPTIONAL] Time window for login attempts in milliseconds
# Default: 900000 (15 minutes)
RATE_LIMIT_LOGIN_WINDOW_MS=900000

# [OPTIONAL] Maximum login attempts per window
# Default: 5
RATE_LIMIT_LOGIN_MAX_ATTEMPTS=5

# Register Rate Limits (IP-based)
# [OPTIONAL] Time window for registration attempts in milliseconds
# Default: 3600000 (1 hour)
RATE_LIMIT_REGISTER_WINDOW_MS=3600000

# [OPTIONAL] Maximum registration attempts per window
# Default: 3
RATE_LIMIT_REGISTER_MAX_ATTEMPTS=3

# Password Reset Rate Limits (IP-based)
# [OPTIONAL] Time window for password reset attempts in milliseconds
# Default: 3600000 (1 hour)
RATE_LIMIT_PASSWORD_RESET_WINDOW_MS=3600000

# [OPTIONAL] Maximum password reset attempts per window
# Default: 3
RATE_LIMIT_PASSWORD_RESET_MAX_ATTEMPTS=3

# Profile Update Rate Limits
# [OPTIONAL] Time window for profile updates in milliseconds
# Default: 3600000 (1 hour)
RATE_LIMIT_PROFILE_UPDATE_WINDOW_MS=3600000

# [OPTIONAL] Maximum profile updates per window
# Default: 10
RATE_LIMIT_PROFILE_UPDATE_MAX_ATTEMPTS=10

# Account Lockout (Account-based)
# [OPTIONAL] Failed login attempts before account lockout
# Default: 10
RATE_LIMIT_ACCOUNT_LOCKOUT_ATTEMPTS=10

# [OPTIONAL] Account lockout duration in milliseconds
# Default: 1800000 (30 minutes)
RATE_LIMIT_ACCOUNT_LOCKOUT_DURATION_MS=1800000

# Global Rate Limits (System-wide)
# [OPTIONAL] Time window for global auth requests in milliseconds
# Default: 60000 (1 minute)
RATE_LIMIT_GLOBAL_AUTH_WINDOW_MS=60000

# [OPTIONAL] Maximum auth requests globally per window
# Default: 1000
RATE_LIMIT_GLOBAL_AUTH_MAX_REQUESTS=1000

# [OPTIONAL] Redis URL for distributed rate limiting
# Falls back to REDIS_HOST if not set
# RATE_LIMIT_REDIS_URL=redis://localhost:6379

# ============================================================================
# TRUSTED PROXIES
# ============================================================================

# [OPTIONAL] Comma-separated list of trusted proxy IPs
# Used for secure IP extraction from X-Forwarded-For headers
# Only these IPs will be trusted when parsing proxy headers
# Leave empty if not using proxies
# Examples:
#   - Single: "10.0.0.1"
#   - Multiple: "10.0.0.1,10.0.0.2,10.0.0.3"
TRUSTED_PROXY_IPS=""

# ============================================================================
# AI SERVICES (Optional - Feature-specific)
# ============================================================================

# [FEATURE] Anthropic API key for Claude AI
# Only required if using Claude-based features
# Obtain from: https://console.anthropic.com
ANTHROPIC_API_KEY="your-anthropic-api-key"

# [FEATURE] OpenAI API key for GPT models
# Only required if using OpenAI-based features
# Obtain from: https://platform.openai.com
# OPENAI_API_KEY="your-openai-api-key"

# [FEATURE] Flux API key for image generation
# Only required if using Flux-based features
# FLUX_API_KEY="your-flux-api-key"

# ============================================================================
# FFMPEG
# ============================================================================

# [OPTIONAL] Path to FFmpeg executable
# Default: "ffmpeg" (uses system PATH)
# Custom path example: "/usr/local/bin/ffmpeg"
FFMPEG_PATH="ffmpeg"

# [OPTIONAL] Path to FFprobe executable
# Default: "ffprobe" (uses system PATH)
# Custom path example: "/usr/local/bin/ffprobe"
FFPROBE_PATH="ffprobe"

# ============================================================================
# NOTES
# ============================================================================
# 1. All required variables MUST be set before starting the application
# 2. Application validates all variables at startup and fails fast if invalid
# 3. See docs/ENVIRONMENT_VARIABLES.md for detailed documentation
# 4. Never commit .env files to version control
# 5. Use different values for each environment (dev/staging/production)
# 6. Generate secure secrets: openssl rand -base64 32
# ============================================================================